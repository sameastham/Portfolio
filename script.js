// Project data for modals
const projectData = {
    realtheory: {
        title: "RealTheory",
        subtitle: "Full UX Including Design System & Analytics",
        description: `
            <h3>Overview</h3>
            <p>Led comprehensive UX redesign for RealTheory's rental platform, implementing AI-driven evaluation systems and cognitive UX principles to dramatically improve user conversion and reduce rental turn-over objections.</p>
            
            <h3>Key Achievements</h3>
            <ul>
                <li><strong>50% Reduction in RTOs:</strong> Implemented AI-driven system evaluation combined with Cognitive UX principles to address user objections before they occurred</li>
                <li><strong>EasyRentals Launch:</strong> Designed and launched a complete Ready-to-Deploy offering that streamlined the rental process for both landlords and tenants</li>
                <li><strong>Seamless Onboarding:</strong> Created an intuitive onboarding flow that guided users through complex rental processes with clarity and confidence</li>
            </ul>

            <h3>Process</h3>
            <p>Conducted extensive user research to identify pain points in the rental process. Developed comprehensive design system including UI components, interaction patterns, and accessibility guidelines. Integrated analytics tracking to measure user behavior and continuously optimize the experience.</p>

            <h3>Tools & Technologies</h3>
            <p>Figma, Adobe XD, Google Analytics, Hotjar, Axure RP</p>
        `,
        links: `
            <a href="https://behance.net" target="_blank" rel="noopener noreferrer" class="btn btn-primary">View on Behance</a>
            <a href="https://alva.uno" target="_blank" rel="noopener noreferrer" class="btn btn-secondary">View on Alva.uno</a>
        `
    },
    att: {
        title: "AT&T",
        subtitle: "Network Outage Manager",
        description: `
            <h3>Overview</h3>
            <p>Designed a unified alert and monitoring system for AT&T's network operations team, enabling rapid response to outages and seamless communication across mobile and web platforms.</p>
            
            <h3>Key Achievements</h3>
            <ul>
                <li><strong>Unified Alert System:</strong> Created a cohesive notification architecture that works seamlessly across iOS, Android, and web platforms</li>
                <li><strong>Real-time Monitoring:</strong> Designed intuitive dashboard for network status tracking with customizable alert thresholds</li>
                <li><strong>Multi-system Integration:</strong> Streamlined data from multiple backend systems into a single, coherent interface</li>
                <li><strong>Rapid Response:</strong> Reduced mean time to acknowledge (MTTA) by 40% through improved alert prioritization and routing</li>
            </ul>

            <h3>Process</h3>
            <p>Worked closely with network operations teams to understand their workflow and pain points. Conducted usability testing with actual operators to refine the interface. Implemented progressive disclosure to manage information density while maintaining quick access to critical data.</p>

            <h3>Tools & Technologies</h3>
            <p>Figma, Jira, Angular, Bootstrap, WebSocket APIs</p>
        `,
        links: `
            <a href="https://alva.uno" target="_blank" rel="noopener noreferrer" class="btn btn-primary">View Case Study</a>
        `
    },
    homedepot: {
        title: "The Home Depot",
        subtitle: "Enterprise Application Launch",
        description: `
            <h3>Overview</h3>
            <p>Led UX efforts for a major enterprise application launch at The Home Depot, focusing on catalog configuration, platform modernization, and system-wide UI standardization.</p>
            
            <h3>Key Achievements</h3>
            <ul>
                <li><strong>Product Catalog System:</strong> Designed comprehensive interface for managing 100,000+ product SKUs with advanced filtering and search capabilities</li>
                <li><strong>Provider Platform Modernization:</strong> Redesigned legacy systems with modern UI patterns and responsive design</li>
                <li><strong>Component Library:</strong> Created standardized UI component library used across 15+ applications</li>
                <li><strong>Quality Assurance:</strong> Identified and resolved 230+ critical system defects through rigorous UX audits</li>
            </ul>

            <h3>Process</h3>
            <p>Collaborated with cross-functional teams including product managers, developers, and business stakeholders. Established design system governance and documentation. Conducted training sessions for internal teams on new UI patterns and best practices.</p>

            <h3>Tools & Technologies</h3>
            <p>Figma, Sketch, ASP.NET MVC, Angular, Storybook</p>
        `,
        links: `
            <a href="#contact" class="btn btn-primary">Learn More</a>
        `
    },
    assurant: {
        title: "Assurant",
        subtitle: "Mobile Device Protection Platform",
        description: `
            <h3>Overview</h3>
            <p>Developed comprehensive UX strategy for Assurant's mobile device protection platform, focusing on improving communication, functionality, and global accessibility.</p>
            
            <h3>Key Achievements</h3>
            <ul>
                <li><strong>Enhanced Communication:</strong> Redesigned customer communication flows to reduce support inquiries by 35%</li>
                <li><strong>Competitive Infrastructure:</strong> Built scalable design system that positioned Assurant as industry leader in device protection UX</li>
                <li><strong>Modern Codebase:</strong> Aligned design strategy with development modernization efforts for improved maintainability</li>
                <li><strong>Global Accessibility:</strong> Implemented localization support for 12 languages and WCAG 2.1 AA compliance</li>
            </ul>

            <h3>Process</h3>
            <p>Conducted competitive analysis and user research across multiple markets. Created persona-based design approach to address diverse user needs. Implemented continuous testing and iteration based on user feedback and analytics.</p>

            <h3>Tools & Technologies</h3>
            <p>Figma, InVision, React Native, iOS, Android</p>
        `,
        links: `
            <a href="https://behance.net" target="_blank" rel="noopener noreferrer" class="btn btn-primary">View on Behance</a>
            <a href="https://alva.uno" target="_blank" rel="noopener noreferrer" class="btn btn-secondary">View on Alva.uno</a>
        `
    },
    renovistics: {
        title: "Renovistics",
        subtitle: "Claims Management Platform",
        description: `
            <h3>Overview</h3>
            <p>Designed intelligent claims management system for Renovistics, focusing on automated routing, multi-system integration, and customizable workflows for enterprise clients.</p>
            
            <h3>Key Achievements</h3>
            <ul>
                <li><strong>Intelligent Routing:</strong> Created smart routing system that automatically assigns claims based on complexity, expertise, and workload</li>
                <li><strong>Automated Alerts:</strong> Designed notification framework that keeps all stakeholders informed without creating alert fatigue</li>
                <li><strong>Unified Interface:</strong> Integrated data from multiple legacy systems into single, intuitive dashboard</li>
                <li><strong>Workflow Customization:</strong> Enabled enterprise clients to configure workflows to match their unique business processes</li>
            </ul>

            <h3>Process</h3>
            <p>Mapped existing claims processes through stakeholder interviews and shadowing sessions. Identified bottlenecks and pain points. Designed iterative prototypes tested with actual claims adjusters and supervisors.</p>

            <h3>Tools & Technologies</h3>
            <p>Axure RP, Balsamiq, Angular, Bootstrap</p>
        `,
        links: `
            <a href="https://alva.uno" target="_blank" rel="noopener noreferrer" class="btn btn-primary">View Case Study</a>
        `
    },
    freelance: {
        title: "Freelance Projects",
        subtitle: "Various Client Engagements",
        description: `
            <h3>Overview</h3>
            <p>Diverse portfolio of freelance UX projects spanning government agencies, startups, and established enterprises. Focused on improving user experience through better design, documentation, and training.</p>
            
            <h3>Key Projects</h3>
            <ul>
                <li><strong>Government Applications:</strong> Partnered with federal and state agencies to design citizen-facing applications with focus on accessibility and clarity</li>
                <li><strong>Team Productivity:</strong> Improved team morale and efficiency through better documentation and streamlined design handoff processes</li>
                <li><strong>Training Materials:</strong> Created simplified training guides and video tutorials for complex enterprise systems</li>
                <li><strong>Localization:</strong> Implemented internationalization strategies across various projects to support global audiences</li>
            </ul>

            <h3>Approach</h3>
            <p>Adapted methodology to each client's unique needs and constraints. Emphasized clear communication, realistic timelines, and measurable outcomes. Built long-term relationships through consistent delivery of high-quality work.</p>

            <h3>Tools & Technologies</h3>
            <p>Full Adobe Creative Suite, Figma, various front-end frameworks</p>
        `,
        links: `
            <a href="#contact" class="btn btn-primary">Discuss Your Project</a>
        `
    }
};

// Navigation functionality
document.addEventListener('DOMContentLoaded', function() {
    const navLinks = document.querySelectorAll('.nav-link');
    const menuToggle = document.getElementById('menuToggle');
    const navMenu = document.getElementById('navMenu');
    const sections = document.querySelectorAll('.section');
    const modal = document.getElementById('portfolioModal');
    const modalClose = document.querySelector('.modal-close');

    // Mobile menu toggle
    menuToggle.addEventListener('click', function() {
        const isExpanded = navMenu.classList.contains('active');
        navMenu.classList.toggle('active');
        menuToggle.setAttribute('aria-expanded', !isExpanded);
        
        // Animate hamburger icon
        const spans = menuToggle.querySelectorAll('span');
        if (navMenu.classList.contains('active')) {
            spans[0].style.transform = 'rotate(45deg) translateY(8px)';
            spans[1].style.opacity = '0';
            spans[2].style.transform = 'rotate(-45deg) translateY(-8px)';
        } else {
            spans[0].style.transform = 'none';
            spans[1].style.opacity = '1';
            spans[2].style.transform = 'none';
        }
    });

    // Close mobile menu when clicking a link
    navLinks.forEach(link => {
        link.addEventListener('click', function() {
            if (window.innerWidth <= 768) {
                navMenu.classList.remove('active');
                menuToggle.setAttribute('aria-expanded', 'false');
                const spans = menuToggle.querySelectorAll('span');
                spans[0].style.transform = 'none';
                spans[1].style.opacity = '1';
                spans[2].style.transform = 'none';
            }
        });
    });

    // Smooth scrolling for navigation links
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href').substring(1);
            const targetSection = document.getElementById(targetId);
            
            if (targetSection) {
                const offsetTop = targetSection.offsetTop - 60;
                window.scrollTo({
                    top: offsetTop,
                    behavior: 'smooth'
                });
            }
        });
    });

    // Highlight active section in navigation
    function updateActiveNav() {
        let current = '';
        const navbar = document.getElementById('navbar');

        sections.forEach(section => {
            const sectionTop = section.offsetTop - 100;
            const sectionHeight = section.clientHeight;

            if (window.scrollY >= sectionTop && window.scrollY < sectionTop + sectionHeight) {
                current = section.getAttribute('id');
            }
        });

        // Update nav links
        navLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href') === `#${current}`) {
                link.classList.add('active');
            }
        });

        // Update navbar background color based on current section
        navbar.classList.remove('section-home', 'section-portfolio', 'section-experience', 'section-about', 'section-contact');
        if (current) {
            navbar.classList.add(`section-${current}`);
        }
    }

    // Update active nav on scroll
    window.addEventListener('scroll', updateActiveNav);
    updateActiveNav();

    // Portfolio card click handlers
    const portfolioCards = document.querySelectorAll('.portfolio-card');
    portfolioCards.forEach(card => {
        // Click handler
        card.addEventListener('click', function() {
            const projectId = this.getAttribute('data-project');
            openModal(projectId);
        });

        // Keyboard accessibility - Enter and Space
        card.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                const projectId = this.getAttribute('data-project');
                openModal(projectId);
            }
        });

        // Hover effect
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-10px) scale(1.02)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
    });

    // Modal functionality
    function openModal(projectId) {
        const project = projectData[projectId];
        if (!project) return;

        document.getElementById('modalTitle').textContent = project.title;
        document.querySelector('.modal-subtitle').textContent = project.subtitle;
        document.querySelector('.modal-description').innerHTML = project.description;
        document.querySelector('.modal-links').innerHTML = project.links;

        modal.classList.add('active');
        modal.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';

        // Focus the modal
        modalClose.focus();

        // Trap focus within modal
        trapFocus(modal);
    }

    function closeModal() {
        modal.classList.remove('active');
        modal.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
        
        // Return focus to the card that opened the modal
        const activeCard = document.activeElement;
        if (activeCard && activeCard.classList.contains('portfolio-card')) {
            activeCard.focus();
        }
    }

    // Modal close handlers
    modalClose.addEventListener('click', closeModal);
    
    modal.addEventListener('click', function(e) {
        if (e.target === modal) {
            closeModal();
        }
    });

    // Keyboard accessibility for modal
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && modal.classList.contains('active')) {
            closeModal();
        }
    });

    // Focus trap for modal
    function trapFocus(element) {
        const focusableElements = element.querySelectorAll(
            'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
        );
        const firstFocusable = focusableElements[0];
        const lastFocusable = focusableElements[focusableElements.length - 1];

        element.addEventListener('keydown', function(e) {
            if (e.key === 'Tab') {
                if (e.shiftKey) {
                    if (document.activeElement === firstFocusable) {
                        lastFocusable.focus();
                        e.preventDefault();
                    }
                } else {
                    if (document.activeElement === lastFocusable) {
                        firstFocusable.focus();
                        e.preventDefault();
                    }
                }
            }
        });
    }

    // Download Resume functionality
    const downloadBtn = document.getElementById('downloadResume');
    if (downloadBtn) {
        downloadBtn.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Replace with actual resume URL
            alert('Please update the resume URL in script.js. Currently set to placeholder.');
            
            // Uncomment and add your resume URL:
            // window.open('path/to/your/resume.pdf', '_blank');
        });
    }

    // Contact Form Submission with validation
    const contactForm = document.getElementById('contactForm');
    
    if (contactForm) {
        // Real-time validation
        const nameInput = document.getElementById('name');
        const emailInput = document.getElementById('email');
        const messageInput = document.getElementById('message');

        nameInput.addEventListener('blur', () => validateField(nameInput, 'name-error', 'Please enter your name'));
        emailInput.addEventListener('blur', () => validateEmail(emailInput));
        messageInput.addEventListener('blur', () => validateField(messageInput, 'message-error', 'Please enter a message'));

        contactForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Validate all fields
            const nameValid = validateField(nameInput, 'name-error', 'Please enter your name');
            const emailValid = validateEmail(emailInput);
            const messageValid = validateField(messageInput, 'message-error', 'Please enter a message');

            if (!nameValid || !emailValid || !messageValid) {
                return;
            }

            const formData = {
                name: nameInput.value,
                email: emailInput.value,
                message: messageInput.value
            };

            // Show loading state
            const submitBtn = contactForm.querySelector('.btn-submit');
            const originalBtnText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle></svg> Sending...';
            submitBtn.disabled = true;
            submitBtn.setAttribute('aria-busy', 'true');

            try {
                // Using Web3Forms - FREE email service
                // Sign up at https://web3forms.com to get your access key
                const response = await fetch('https://api.web3forms.com/submit', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({
                        access_key: 'YOUR_WEB3FORMS_ACCESS_KEY_HERE', // Replace with your key
                        name: formData.name,
                        email: formData.email,
                        message: formData.message,
                        subject: `Portfolio Contact from ${formData.name}`
                    })
                });

                const result = await response.json();

                if (result.success) {
                    showNotification('Message sent successfully! I\'ll get back to you soon.', 'success');
                    contactForm.reset();
                    clearErrors();
                } else {
                    throw new Error('Form submission failed');
                }
            } catch (error) {
                console.error('Form submission error:', error);
                showNotification('There was an error sending your message. Please try again or contact me via LinkedIn.', 'error');
            } finally {
                submitBtn.innerHTML = originalBtnText;
                submitBtn.disabled = false;
                submitBtn.removeAttribute('aria-busy');
            }
        });
    }

    // Validation functions
    function validateField(input, errorId, errorMessage) {
        const errorElement = document.getElementById(errorId);
        if (input.value.trim() === '') {
            errorElement.textContent = errorMessage;
            input.setAttribute('aria-invalid', 'true');
            return false;
        }
        errorElement.textContent = '';
        input.setAttribute('aria-invalid', 'false');
        return true;
    }

    function validateEmail(input) {
        const errorElement = document.getElementById('email-error');
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        
        if (input.value.trim() === '') {
            errorElement.textContent = 'Please enter your email';
            input.setAttribute('aria-invalid', 'true');
            return false;
        }
        
        if (!emailRegex.test(input.value)) {
            errorElement.textContent = 'Please enter a valid email address';
            input.setAttribute('aria-invalid', 'true');
            return false;
        }
        
        errorElement.textContent = '';
        input.setAttribute('aria-invalid', 'false');
        return true;
    }

    function clearErrors() {
        document.querySelectorAll('.error-message').forEach(error => {
            error.textContent = '';
        });
        document.querySelectorAll('input, textarea').forEach(input => {
            input.removeAttribute('aria-invalid');
        });
    }

    // Notification function
    function showNotification(message, type) {
        const notification = document.createElement('div');
        notification.className = `notification notification-${type}`;
        notification.textContent = message;
        notification.setAttribute('role', type === 'error' ? 'alert' : 'status');
        notification.setAttribute('aria-live', 'polite');
        notification.style.cssText = `
            position: fixed;
            top: 100px;
            right: 20px;
            padding: 20px 30px;
            background: ${type === 'success' ? '#4a7c59' : '#8b3a2f'};
            color: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            z-index: 10000;
            animation: slideIn 0.3s ease;
            max-width: 400px;
        `;

        document.body.appendChild(notification);

        setTimeout(() => {
            notification.style.animation = 'slideOut 0.3s ease';
            setTimeout(() => {
                notification.remove();
            }, 300);
        }, 5000);
    }

    // Add notification animations
    const style = document.createElement('style');
    style.textContent = `
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
    `;
    document.head.appendChild(style);

    // Intersection Observer for fade-in animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -100px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);

    // Observe portfolio cards for animation
    portfolioCards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(30px)';
        card.style.transition = `all 0.6s ease ${index * 0.1}s`;
        observer.observe(card);
    });

    // Observe skill items for animation
    const skillItems = document.querySelectorAll('.skill-item');
    skillItems.forEach((item, index) => {
        item.style.opacity = '0';
        item.style.transform = 'translateX(-20px)';
        item.style.transition = `all 0.4s ease ${index * 0.05}s`;
        observer.observe(item);
    });
});

// Smooth scroll for all anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        const href = this.getAttribute('href');
        if (href !== '#') {
            e.preventDefault();
            const target = document.querySelector(href);
            if (target) {
                const offsetTop = target.offsetTop - 60;
                window.scrollTo({
                    top: offsetTop,
                    behavior: 'smooth'
                });
            }
        }
    });
});